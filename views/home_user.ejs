<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wardrobe</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@400;700&family=Montserrat:wght@400;700&family=Lora:wght@400;700&display=swap" rel="stylesheet">


  <link rel="stylesheet" href="/css/style.css">
  
</head>

<body>
  
  <%- include('partials/navbar') %>
  <% if (typeof successMsg !== "undefined") { %>,
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <%= successMsg %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <script>
      setTimeout(() => {
        document.querySelector('.alert').style.display = 'none';
      }, 3000); // Hide after 3 seconds
    </script>
  <% } %>
 
  <div class="banner-container bannerHome">
    <!-- First Slide: Welcome Banner -->
    <div class="banner-slide" style="display: block;" id="welcomeBanner">
        <div class="welcome-banner">
            <div class="welcome-content">
                <div class="text-content">
                    <h1>Wardrobe Clothing Store</h1>
                    <p>Fill your wardrobes with our latest collection. All your favourites in one store.</p>
                    <span>
                        <a href="/about-us" class="btn btn-light aboutButton">About Us</a>
                        <a href="#" id="offersButton" class="btn btn-light aboutButton">Offers</a>
                        <a href="/" class="btn btn-light aboutButton">Contact Us</a>
                    </span>
                </div>
                <img src="/uploads/top4-5-removebg-preview.png" alt="Fashion Model" class="welcome-image">
            </div>
        </div>
    </div>
    
    <!-- Offer Slides -->
    <% banners.forEach((banner, index) => { %>
        <div class="banner-slide offer-slide" style="display: none;">
            <a href="/product/offer/<%= banner.offerId._id %>">
                <img src="/uploads/banner_resized/large/<%= banner.bannerImage %>" 
                     alt="Offer Banner" class="banner-image">
            </a>
        </div>
    <% }) %>
</div>


<section class="new-arrivals" id="newArrivals">
  <h2 class="heading">New Arrivals</h2>
  <div class="carousel-container">
    <button class="home-arrowLeft" onclick="scrollCarousel(-1)">&#10094;</button>
    <div class="product-carousel">
      <% products.forEach((product, index)=> { %>
        <a href="/product/<%= product._id %>" class="product-link">
          <div class="product-card productHomeCard">
            <div class="product-image productImg">
              <% product.imageUrls.forEach((imageUrl, i) => { %>
                <img src="<%= '/uploads/' + imageUrl.replace(/^uploads\\/, '').replace(/\\/g, '/').replace(/ /g, '%20') %>"
                     alt="<%= product.productName %>"
                     class="product-slide <%= i === 0 ? 'active' : '' %>"> 
              <% }) %>
              <div class="wishlist-btn"><i class="fa-regular fa-heart"></i></div> <!-- Wishlist button -->
            </div>
            <p class="productNames"><%= product.productName %></p>
            <% if (product.discountedPrice && product.discountedPrice < product.price) { %>
              <p class="productHomeDiscount"><%= product.finalDiscount %>% OFF</p>
              <div class="priceSection">
                <span class="productHomeDiscountPrice">‚Çπ<%= product.discountedPrice %></span>
                <span class="productHomePrice">‚Çπ<%= product.price %></span>
              </div>
            <% } else { %>
              <div class="priceSection">
                <span class="productHomeDiscountPrice">‚Çπ<%= product.price %></span>
              </div>
            <% } %>
          </div>
        </a>
      <% }) %>
    </div>
    <button class="home-arrowRight" onclick="scrollCarousel(1)">&#10095;</button>
  </div>
</section>
<section class="categories-section">
  <h2 class="heading">Shop by Category</h2>
  <div class="category-container">
    <% categories.forEach(category=> { %>
      <a href="/product/category/<%= category._id %>?category=<%= category._id %>">
        <div class="category-card">

          <img src=" /uploads/categories_resized/grid/<%= category.image %>" alt="<%= category.name %>" class="category-img">
          <p class="category-name">
            <%= category.name %>
          </p>
        </div>
      </a>
      <% }) %>
  </div>
</section>
<!-- HOT DEALS SECTION -->
<section class="hot-deals" id="hotDealsSection">
  <h2 class="heading">Hot Deals</h2>
  <div class="carousel-container">
    <button class="home-arrowLeft" onclick="scrollCarousel(-1)">&#10094;</button>
    <div class="product-carousel" id="hotDeals">
      <% hotDeals.forEach((product)=> { %>
        <a href="/product/<%= product._id %>" class="product-link">
          <div class="product-card productHomeCard">
            <img
              src="<%= '/uploads/' + product.imageUrls[0].replace(/^uploads\\/, '').replace(/\\/g, '/').replace(/ /g, '%20') %>"
              alt="<%= product.productName %>">

            <% if (limitedOfferProductIds.includes(product._id.toString())) { %>
              <p class="limited-time-deal">‚è≥Limited Time Deal</p>
              <% } %>
                <p class="productNames">
                  <%= product.productName %>
                </p>
                <p class="productHomeDiscount">
                  <%= product.finalDiscount %>% OFF
                </p>
                <div class="priceSection">
                  <span class="productHomeDiscountPrice">‚Çπ<%= product.discountedPrice %></span>
                  <span class="productHomePrice">‚Çπ<%= product.price %></span>
                </div>
          </div>
        </a>
        <% }) %>
    </div>
    <button class="home-arrowRight" onclick="scrollCarousel(1)">&#10095;</button>
  </div>
</section>
<div class="coupon-flashcard">
  <div class="coupon-sidebar">
      <span class="arrow">&#9664;</span>  <!-- Left Arrow Icon -->

      <% if (!user) { %> 
          <p>Log in to unlock exciting offers</p>
      <% } else if (showNewUserCoupon.length > 0) { %> 
          <p><%= showNewUserCoupon[0].discount %>% OFF</p>
      <% } else { %>
          <p>Exclusive Offers for You!</p>
      <% } %>
  </div>

  <div class="coupon-details">
      <div class="coupon-content">
          <% if (showNewUserCoupon.length > 0) { %>
              <h2>Avail Upto <br> <strong>‚Çπ<%= showNewUserCoupon[0].discount %> OFF</strong></h2>
              <p><strong>Coupon Code:</strong> <%= showNewUserCoupon[0].name %></p>
              <p>Applicable on your first order</p>
          <% } else { %>
              <h2>Exclusive Offers Await You!</h2>
              <p>Sign up or log in to see available deals</p>
              <a href="/login"><button class="signup-btn">SIGN UP NOW ></button></a>
          <% } %>
          
          
          <div class="features">
              <p>‚úÖ Genuine Products</p>
              <p>‚úÖ Try & Buy</p>
              <p>‚úÖ Easy Exchanges & Returns</p>
          </div>
      </div>
  </div>
</div>
<footer class="footer-section">
  <div class="footer-wrapper">
  
    <!-- Footer Top -->
    <div class="footer-top">
      <div class="container">
        <div class="row">
          
          <!-- Information -->
          <div class="col-lg-3 col-md-6 col-sm-12 footer-widget">
            <h5 class="title">INFORMATION</h5>
            <ul class="footer-nav">
              <li><a href="/myorder">Delivery Information</a></li>
              <li><a href="/contact-us">Contact</a></li>
              <li><a href="/myorder">Returns</a></li>
            </ul>
          </div>
  
          <!-- My Account -->
          <div class="col-lg-3 col-md-6 col-sm-12 footer-widget">
            <h5 class="title">MY ACCOUNT</h5>
            <ul class="footer-nav">
              <li><a href="/userAc">My Account</a></li>
              <li><a href="/wishlist">Wishlist</a></li>
              <li><a href="/myorder">Order History</a></li>
            </ul>
          </div>
  
          <!-- Categories -->
          <div class="col-lg-3 col-md-6 col-sm-12 footer-widget">
            <h5 class="title">CATEGORIES</h5>
            <ul class="footer-nav">
              <% categories.forEach(category => { %>
                <li>
                  <a href="/product/category/<%= category._id %>?category=<%= category._id %>">
                    <%= category.name %>
                  </a>
                </li>
              <% }); %>
            </ul>
          </div>
  
          <!-- About Us -->
          <div class="col-lg-3 col-md-6 col-sm-12 footer-widget">
            <h5 class="title">ABOUT US</h5>
            <p>We are a team of entrepreneurs creating high-quality products.</p>
            <address>
              <p>üìç Wardrobe Clothing Centre, Kochi</p>
              <p>üìß wardrobeecom77@gmail.com</p>
            </address>
          </div>
  
        </div>
      </div>
    </div>
  
    <!-- Social Media -->
    <div class="footer-center">
      <div class="container text-center">
        <h4 class="title">DON'T MISS OUT ON THE LATEST</h4>
        <h4 class="title">FOLLOW US</h4>
        <ul class="footer-social">
          <li><a href="#"><i class="fa fa-facebook"></i></a></li>
          <li><a href="#"><i class="fa fa-twitter"></i></a></li>
          <li><a href="#"><i class="fa fa-instagram"></i></a></li>
        </ul>
      </div>
    </div>
  
    <!-- Footer Bottom -->
    <div class="footer-bottom">
      <div class="container text-center">
        <p>&copy; 2024 <a href="/product/home">WARDROBE</a>. All rights reserved.</p>
      </div>
    </div>
  
  </div>
  </footer>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
     document.querySelectorAll(".productImg").forEach(productImg => {
            let images = productImg.querySelectorAll(".product-slide");
            let currentIndex = 0;

            productImg.addEventListener("mouseenter", () => {
                  let interval = setInterval(() => {
                        images[currentIndex].classList.remove("active");
                        currentIndex = (currentIndex + 1) % images.length;
                        images[currentIndex].classList.add("active");
                  }, 1000); // Change image every second

                  productImg.dataset.intervalId = interval;
            });

            productImg.addEventListener("mouseleave", () => {
                  clearInterval(productImg.dataset.intervalId);
                  images.forEach(img => img.classList.remove("active"));
                  images[0].classList.add("active"); // Reset to first image
            });
      });

      
      const sidebar = document.querySelector(".coupon-sidebar");
      const container = document.querySelector(".coupon-flashcard");

      sidebar.addEventListener("click", function () {
            container.classList.toggle("open");
      });


      
    });

    document.addEventListener("DOMContentLoaded", function () {
    const offerButton = document.getElementById("offersButton"); // Select Offers button
    const welcomeBanner = document.getElementById("welcomeBanner"); // Welcome banner
    const banners = document.querySelectorAll(".offer-slide"); // Offer banners
    let currentIndex = 0;
    let cycleCompleted = false;

    offerButton.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent default link action
        if (cycleCompleted) return; // If cycle completed, don't restart

        welcomeBanner.style.display = "none"; // Hide welcome banner

        function showNextBanner() {
            if (currentIndex < banners.length) {
                banners[currentIndex].style.display = "block"; // Show current banner
                setTimeout(() => {
                    banners[currentIndex].style.display = "none"; // Hide after 2s
                    currentIndex++;
                    showNextBanner(); // Show next banner
                }, 3000);
            } else {
                setTimeout(() => {
                    currentIndex = 0;
                    cycleCompleted = false; // Reset cycle
                    welcomeBanner.style.display = "block"; // Show welcome banner again
                }, 0);
            }
        }

        showNextBanner(); // Start sliding effect
    });
});
window.history.pushState(null, "", window.location.href);
  window.onpopstate = function () {
    window.history.pushState(null, "", window.location.href);
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/main.js"></script>
  
</body>
</html>
  